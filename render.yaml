services:
  - type: web
    name: tener-ai-v1
    runtime: python
    plan: starter
    autoDeploy: true
    buildCommand: pip install .
    startCommand: PYTHONPATH=src python -m tener_ai
    healthCheckPath: /health
    envVars:
      - key: TENER_DB_PATH
        value: /var/data/tener_v1.sqlite3
    disk:
      name: tener-data
      mountPath: /var/data
      sizeGB: 1

  - type: web
    name: tener-interview-dashboard
    runtime: python
    plan: starter
    autoDeploy: true
    buildCommand: pip install .
    startCommand: TENER_INTERVIEW_HOST=0.0.0.0 TENER_INTERVIEW_PORT=$PORT PYTHONPATH=src python -m tener_interview
    healthCheckPath: /health
    envVars:
      - key: TENER_INTERVIEW_PROVIDER
        value: hireflix
      - key: TENER_INTERVIEW_DB_PATH
        value: /var/data/tener_interview.sqlite3
      - key: TENER_INTERVIEW_SOURCE_API_BASE
        value: https://tener-ai-v1.onrender.com
      - key: TENER_HIREFLIX_API_KEY
        sync: false
      - key: TENER_HIREFLIX_POSITION_ID
        sync: false
      - key: TENER_INTERVIEW_TOKEN_SECRET
        sync: false
    disk:
      name: tener-interview-data
      mountPath: /var/data
      sizeGB: 1

  - type: web
    name: tener-company-profile
    runtime: python
    plan: starter
    autoDeploy: true
    buildCommand: pip install .
    startCommand: TENER_COMPANY_PROFILE_HOST=0.0.0.0 TENER_COMPANY_PROFILE_PORT=$PORT PYTHONPATH=src python -m tener_company_profile
    healthCheckPath: /health
    envVars:
      - key: TENER_COMPANY_PROFILE_SEARCH_MODE
        value: bing_rss
      - key: TENER_COMPANY_PROFILE_ALLOW_SEED_FALLBACK
        value: "true"
      - key: TENER_COMPANY_PROFILE_USE_LLM
        value: "true"
      - key: TENER_COMPANY_PROFILE_SEED_COMPANY
        value: Tener
      - key: TENER_COMPANY_PROFILE_SEED_WEBSITE
        value: https://tener.ai
      - key: GOOGLE_CSE_API_KEY
        sync: false
      - key: GOOGLE_CSE_CX
        sync: false
      - key: OPENAI_API_KEY
        sync: false
      - key: TENER_COMPANY_PROFILE_LLM_MODEL
        value: gpt-4o-mini
